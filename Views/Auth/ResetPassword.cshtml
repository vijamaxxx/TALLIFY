@{
    ViewData["Title"] = "Reset Password";
    Layout = "_AuthLayout";
}

<div class="auth-page">
  <div class="auth-card">
    <div class="auth-logo-wrapper">
      <img src="~/images/LOGO TEXT.png" alt="Logo" class="auth-logo" />
    </div>

    <section class="auth-screen is-active" aria-label="Reset password">
      <h1 class="auth-title">Reset your password</h1>

      @* Server-side error (invalid / expired link, or validation failure) *@
      @if (ViewBag.Error != null)
      {
          <div class="auth-alert auth-alert-error">
              @ViewBag.Error
          </div>
      }

      @* Only show the form if the link is valid *@
      @if (ViewBag.Error == null)
      {
        <form id="resetPasswordForm"
              method="post"
              asp-action="ResetPassword"
              asp-controller="Auth"
              class="auth-form">
          @Html.AntiForgeryToken()

          <input type="hidden" name="userId" value="@ViewBag.UserId" />
          <input type="hidden" name="token" value="@ViewBag.Token" />

          <div class="auth-floating-group">
            <div class="auth-input-wrapper">
              <input id="rp-password"
                     name="password"
                     type="password"
                     class="auth-input auth-input-with-toggle auth-password"
                     placeholder=" "
                     required />
              <label class="auth-floating-label" for="rp-password">New password</label>
              <button type="button"
                      class="password-toggle"
                      data-target="rp-password"
                      data-visible="false"
                      aria-label="Toggle password visibility">
                ðŸ™‰
              </button>
            </div>
            <p class="auth-helper-text">
              Password must be at least 8 characters and include an uppercase letter,
              lowercase letter, number, and special character.
            </p>
          </div>

          <div class="auth-floating-group">
            <div class="auth-input-wrapper">
              <input id="rp-confirm"
                     name="confirmPassword"
                     type="password"
                     class="auth-input auth-input-with-toggle auth-password"
                     placeholder=" "
                     required />
              <label class="auth-floating-label" for="rp-confirm">Confirm new password</label>
              <button type="button"
                      class="password-toggle"
                      data-target="rp-confirm"
                      data-visible="false"
                      aria-label="Toggle password visibility">
                ðŸ™‰
              </button>
            </div>
          </div>

          <div class="auth-actions-single">
            <button type="submit" class="auth-button auth-button-primary">
              Reset password
            </button>
          </div>
        </form>
      }

      <p class="auth-bottom-text">
        Back to
        <a asp-controller="Auth" asp-action="Login" class="auth-link-inline">Login</a>
      </p>
    </section>
  </div>
</div>
